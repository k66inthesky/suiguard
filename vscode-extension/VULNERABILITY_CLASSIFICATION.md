# SuiAudit æ¼æ´åˆ†é¡åŠŸèƒ½

## ğŸ¯ åŠŸèƒ½æ¦‚è¿°

VS Code Extension ç¾åœ¨æ”¯æŒé¡¯ç¤ºè©³ç´°çš„æ¼æ´åˆ†é¡,åŸºæ–¼å¾Œç«¯ ML æ¨¡å‹è¨“ç·´çš„ 5 ç¨®ç‰¹å®šæ¼æ´é¡å‹ã€‚

## ğŸ“Š æ”¯æŒçš„æ¼æ´é¡å‹

### 1. ğŸ’§ Resource Leak (è³‡æºæ´©æ¼)
- **æè¿°**: è³‡æºæœªæ­£ç¢ºé‡‹æ”¾æˆ–ç®¡ç†
- **é—œéµå­—**: resource, leak, è³‡æº, æ´©æ¼, æ³„æ¼
- **é¡è‰²**: `#ff6b6b` (ç´…è‰²)

### 2. ğŸ”¢ Arithmetic Overflow (ç®—è¡“æº¢ä½)
- **æè¿°**: æ•¸å€¼è¨ˆç®—å¯èƒ½è¶…å‡ºç¯„åœ
- **é—œéµå­—**: overflow, arithmetic, æº¢ä½, æº¢å‡º, ç®—è¡“
- **é¡è‰²**: `#ee5a6f` (æ·±ç´…è‰²)

### 3. âš ï¸ Unchecked Return (æœªæª¢æŸ¥è¿”å›å€¼)
- **æè¿°**: å‡½æ•¸è¿”å›å€¼æœªç¶“é©—è­‰
- **é—œéµå­—**: unchecked, return, æœªæª¢æŸ¥, è¿”å›å€¼
- **é¡è‰²**: `#feca57` (é»ƒè‰²)

### 4. ğŸ”€ Cross-Module Pollution (è·¨æ¨¡çµ„æ±¡æŸ“)
- **æè¿°**: æ¨¡çµ„é–“å­˜åœ¨ä¸å®‰å…¨çš„ä¾è³´æˆ–æ•¸æ“šæµ
- **é—œéµå­—**: cross-module, pollution, è·¨æ¨¡çµ„, æ±¡æŸ“
- **é¡è‰²**: `#ff9ff3` (ç²‰ç´…è‰²)

### 5. ğŸ” Capability Leak (æ¬Šé™æ´©æ¼)
- **æè¿°**: æ¬Šé™ç®¡ç†å­˜åœ¨æ¼æ´
- **é—œéµå­—**: capability, permission, access control, æ¬Šé™
- **é¡è‰²**: `#ff4757` (äº®ç´…è‰²)

## ğŸ”„ å·¥ä½œæµç¨‹

1. **ä»£ç¢¼åˆ†æ**: ç”¨æˆ¶åœ¨ VS Code ä¸­é¸æ“‡ Move ä»£ç¢¼ä¸¦åŸ·è¡Œ `SuiAudit: Real-time Analyze`
2. **å¾Œç«¯è™•ç†**: ä»£ç¢¼ç™¼é€åˆ° `/api/real-time-analyze` ç«¯é»
3. **ML åˆ†æ**: Backend ä½¿ç”¨è¨“ç·´å¥½çš„ LoRA æ¨¡å‹åˆ†æä»£ç¢¼
4. **æ¼æ´åˆ†é¡**: Extension æ ¹æ“š ML è¿”å›çš„æ¼æ´æè¿°è‡ªå‹•åˆ†é¡
5. **å¯è¦–åŒ–é¡¯ç¤º**: 
   - ğŸ“Š æ¼æ´åˆ†é¡çµ±è¨ˆå¡ç‰‡
   - ğŸ“ è©³ç´°æ¼æ´åˆ—è¡¨ (å¸¶åˆ†é¡æ¨™ç±¤)
   - ğŸ’¡ ä¿®å¾©å»ºè­°

## ğŸ¨ UI çµ„ä»¶

### æ¼æ´åˆ†é¡å¡ç‰‡
```html
<div class="classification-card">
  <div class="classification-header">
    <span class="classification-icon">ğŸ’§</span>
    <span class="classification-name">Resource Leak</span>
    <span class="classification-count">3</span>
  </div>
  <div class="classification-desc">è³‡æºæ´©æ¼ - è³‡æºæœªæ­£ç¢ºé‡‹æ”¾æˆ–ç®¡ç†</div>
</div>
```

### æ¼æ´è©³æƒ…æ¨™ç±¤
```html
<div class="vulnerability">
  <span class="vuln-type-badge">ğŸ’§ Resource Leak</span>
  <div class="vuln-content">å…·é«”çš„æ¼æ´æè¿°...</div>
</div>
```

## ğŸ”— èˆ‡å¾Œç«¯çš„æ•´åˆ

### Backend API ç«¯é»
- **URL**: `POST /api/real-time-analyze`
- **Request**:
  ```json
  {
    "source_code": "module code...",
    "file_name": "example.move"
  }
  ```
- **Response**:
  ```json
  {
    "risk_level": "HIGH",
    "risk_score": 75,
    "confidence": 85.5,
    "vulnerabilities": [
      "Resource leak detected in lending module",
      "Potential arithmetic overflow in balance calculation"
    ],
    "security_issues": [...],
    "recommendations": [...],
    "ml_analysis": {
      "analysis_method": "ml_analysis",
      "model_version": "v1.0",
      "processing_time": 2.5
    }
  }
  ```

### ML æ¨¡å‹æ•´åˆ
- **æ¨¡å‹**: Mistral-7B with LoRA fine-tuning
- **è¨“ç·´æ•¸æ“š**: `backend/ml/contract_bug_dataset.jsonl`
- **æ¼æ´é¡å‹å®šç¾©**: `backend/services/ml_training_service.py`

## ğŸ“ ä½¿ç”¨æ–¹å¼

1. æ‰“é–‹åŒ…å« Move ä»£ç¢¼çš„æ–‡ä»¶
2. é¸æ“‡è¦åˆ†æçš„ä»£ç¢¼å€å¡Š (æˆ–ä¸é¸æ“‡ä»¥åˆ†ææ•´å€‹æ–‡ä»¶)
3. åŸ·è¡Œå‘½ä»¤: `Ctrl+Shift+P` â†’ `SuiAudit: Real-time Analyze`
4. æŸ¥çœ‹åˆ†æå ±å‘Š,åŒ…å«:
   - é¢¨éšªåˆ†æ•¸ç’°å½¢åœ–
   - æ¼æ´åˆ†é¡çµ±è¨ˆ
   - è©³ç´°æ¼æ´åˆ—è¡¨
   - å®‰å…¨å•é¡Œ
   - ä¿®å¾©å»ºè­°

## ğŸ¯ ç‰¹è‰²åŠŸèƒ½

### è‡ªå‹•åˆ†é¡ç®—æ³•
```typescript
function detectVulnerabilityType(vulnerability: string): string {
    const vulnLower = vulnerability.toLowerCase();
    
    // ä½¿ç”¨é—œéµå­—åŒ¹é…è‡ªå‹•åˆ†é¡
    if (vulnLower.includes('resource') || vulnLower.includes('leak')) {
        return 'Resource Leak';
    }
    // ... å…¶ä»–é¡å‹
}
```

### è¦–è¦ºåŒ–å¢å¼·
- ğŸ¨ æ¯ç¨®æ¼æ´é¡å‹æœ‰ç¨ç‰¹çš„é¡è‰²å’Œåœ–æ¨™
- ğŸ“Š çµ±è¨ˆå¡ç‰‡é¡¯ç¤ºå„é¡å‹æ•¸é‡
- ğŸ·ï¸ æ¨™ç±¤ç³»çµ±ä¾¿æ–¼å¿«é€Ÿè­˜åˆ¥
- ğŸ“ˆ ç’°å½¢åœ–é¡¯ç¤ºæ•´é«”é¢¨éšªåˆ†æ•¸

## ğŸ”§ æŠ€è¡“ç´°ç¯€

### æ–‡ä»¶çµæ§‹
```
vscode-extension/
â”œâ”€â”€ src/
â”‚   â”œâ”€â”€ extension.ts          # ä¸»è¦é‚è¼¯å’Œæ¼æ´åˆ†é¡
â”‚   â”œâ”€â”€ analyzer/
â”‚   â”‚   â””â”€â”€ codeAnalyzer.ts   # API èª¿ç”¨
â”‚   â””â”€â”€ views/
â”‚       â””â”€â”€ auditViewProvider.ts
â”œâ”€â”€ package.json
â””â”€â”€ VULNERABILITY_CLASSIFICATION.md
```

### ç›¸é—œå¾Œç«¯æ–‡ä»¶
```
backend/
â”œâ”€â”€ main.py                    # /api/real-time-analyze endpoint
â”œâ”€â”€ services/
â”‚   â”œâ”€â”€ ml_training_service.py # æ¼æ´é¡å‹å®šç¾©
â”‚   â”œâ”€â”€ risk_engine.py         # é¢¨éšªåˆ†æå¼•æ“
â”‚   â””â”€â”€ move_analyzer.py       # Move ä»£ç¢¼åˆ†æ
â””â”€â”€ ml/
    â”œâ”€â”€ contract_bug_dataset.jsonl
    â””â”€â”€ lora_inference.py
```

## ğŸš€ æœªä¾†æ”¹é€²

- [ ] å¢åŠ æ›´å¤šæ¼æ´é¡å‹
- [ ] æ”¯æŒè‡ªå®šç¾©æ¼æ´é¡å‹
- [ ] å°å‡ºåˆ†æå ±å‘Šç‚º PDF
- [ ] æ¼æ´è¶¨å‹¢åˆ†æ
- [ ] èˆ‡ CI/CD æ•´åˆ
